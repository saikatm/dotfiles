#!/usr/bin/env sh

# ===================================
# BSPWM Configuration
# ===================================

# -----------------------------------
# Startup Programs
# -----------------------------------

# Set default cursor
xsetroot -cursor_name left_ptr

# Hotkey daemon
sxhkd &

# Custom scripts and utilities
(sleep 1 && ~/.config/polybar/launch.sh) &
(sleep 1 && ~/.config/bspwm/scripts/touchpad.sh) &

# Applications (running silently in background)
nohup megasync >/dev/null 2>&1 &
nohup flameshot >/dev/null 2>&1 &
nohup dunst >/dev/null 2>&1 &
nohup parcellite >/dev/null 2>&1 &
nohup nm-applet >/dev/null 2>&1 &

# megasync > /dev/null 2>&1 &
# flameshot > /dev/null 2>&1 &
# copyq > /dev/null 2>&1 &
# dunst > /dev/null 2>&1 &

# Random wallpaper from folder
feh --bg-scale --randomize ~/Pictures/wallpapers/* &

# -----------------------------------
# Monitor Setup
# -----------------------------------

bspc monitor -d I II III IV V VI VII VIII IX X

# -----------------------------------
# Global Configuration
# -----------------------------------

# Dracula color scheme for bspwm
bspc config normal_border_color      "#44475a"
bspc config active_border_color      "#8be9fd"
bspc config focused_border_color     "#bd93f9"
bspc config presel_feedback_color    "#f1fa8c"

# Set automatic scheme for balanced window layout (2x2 grid for 4 windows)
bspc config automatic_scheme longest_side

# Focus behavior
bspc config focus_follows_pointer true

# Better pointer behavior
# bspc config pointer_follows_focus    true
# bspc config pointer_follows_monitor  true

# Click to focus (useful for floating windows)
bspc config click_to_focus          true

# Single monocle mode (hide borders when only one window)
bspc config single_monocle          true

# Honor size hints (for terminal applications)
bspc config honor_size_hints        true

# Appearance settings
bspc config border_width         1
bspc config window_gap          10

# Layout settings
bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# Additional appearance settings
bspc config window_gap 5       # Space between windows
bspc config border_width 2      # Border size
bspc config top_padding 35     # top Padding for polybar
bspc config bottom_padding 5     # bottom for nicer loook

# -----------------------------------
# Window Rules
# -----------------------------------
bspc rule -a Todoist state=locked desktop='^1' follow=on
bspc rule -a Firefox state=locked desktop='^2'
bspc rule -a google-chrome state=locked desktop='^3'

bspc rule -a MEGAsync state=floating sticky=off
bspc rule -a megasync state=floating sticky=off
bspc rule -a vlc state=floating sticky=off

# Calculator floating rules 
bspc rule -a Gnome-calculator state=floating
bspc rule -a gnome-calculator state=floating
bspc rule -a Calculator state=floating
bspc rule -a calculator state=floating
bspc rule -a vlc state=floating
bspc rule -a copyq state=floating
